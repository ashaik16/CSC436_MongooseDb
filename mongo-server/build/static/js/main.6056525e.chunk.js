(this.webpackJsonptodoapp=this.webpackJsonptodoapp||[]).push([[0],{67:function(e,t,r){},68:function(e,t,r){"use strict";r.r(t);var a=r(0),c=r.n(a),s=r(15),n=r.n(s),o=r(5),i=r(9),d=r(7),j=c.a.createContext({state:{},dispatch:function(){}}),l=r(2),u=r(8),b=r(75),O=r(76),h=r(74),x=r(73),p=r(1);function m(e){var t=Object(d.d)(),r=e.title,c=e.author,s=e.authorId,n=e.description,i=e.dateCreated,l="true"==e.completed,m=e.dateCompleted,f=Object(a.useState)(!1),g=Object(o.a)(f,2),v=g[0],C=g[1],L=Object(a.useState)(!1),y=Object(o.a)(L,2),w=y[0],k=y[1],S=Object(a.useState)(""),T=Object(o.a)(S,2),E=T[0],D=T[1],_=e._id,F=e.short,I=Object(a.useContext)(j),U=I.state,R=I.dispatch,A=U.user,H=n;F&&n.length>30&&(H=n.substring(0,30)+"...");var G=Object(u.b)((function(e,t,r){return{url:"/todoList/"+e,method:"patch",headers:{Authorization:"".concat(U.user.access_token)},data:{completed:t,dateCompleted:r}}})),B=Object(o.a)(G,2),N=B[0],z=B[1],P=Object(a.useState)(!1),q=Object(o.a)(P,2),V=q[0],Y=q[1];Object(a.useEffect)((function(){if(N&&!1===N.isLoading&&(N.data||N.error))if(N.error)C(!0),401===N.error.code&&D("Unauthorized to toggle the particular todo");else if(R({type:"TOGGLE_TODO",id:_,dateCompleted:N.data.dateCompleted,completed:N.data.completed}),console.log("Inside toggle todo"+l+r),l){t.navigate("/success/"+r+"/task updated to incomplete status./")}else{t.navigate("/success/"+r+"/task completed suceessfully./")}}),[N]);var J=Object(u.b)((function(e){return{url:"/todoList/"+e,method:"delete",headers:{Authorization:"".concat(U.user.access_token)}}})),M=Object(o.a)(J,2),K=M[0],Q=M[1];function W(){Y(!1)}return Object(a.useEffect)((function(){if(K&&!1===K.isLoading&&(K.data||K.error))if(K.error)k(!0),401===K.error.code&&D("Unauthorized to delete the particular todo");else{R({type:"DELETE_TODO",id:_});t.navigate("/success/"+r+"/task deleted sucesssfully./")}}),[K]),Object(p.jsxs)("div",{children:[Object(p.jsx)(b.a,{style:{backgroundColor:"#D6EAF8"},children:Object(p.jsxs)(b.a.Body,{children:[Object(p.jsxs)(b.a.Header,{as:"h5",style:{backgroundColor:"#85C1E9"},children:[" ",Object(p.jsx)(d.a,{href:"/todoList/".concat(_),children:r})]}),Object(p.jsx)(b.a.Title,{dark:!0}),Object(p.jsx)(b.a.Subtitle,{children:Object(p.jsx)("div",{children:"Author: ".concat(c)})}),Object(p.jsx)(b.a.Subtitle,{children:Object(p.jsx)("div",{children:"Author-Id: ".concat(s)})}),Object(p.jsx)(b.a.Subtitle,{children:Object(p.jsx)("div",{children:"Date Created: ".concat(i)})}),Object(p.jsx)(b.a.Subtitle,{children:Object(p.jsx)("div",{children:"Description: ".concat(H)})}),Object(p.jsx)(b.a.Subtitle,{children:"Status:"}),A.username==c&&Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:Object(p.jsx)(h.a.Check,{type:"checkbox",label:"Task Completed",id:"completed",name:"completed",defaultChecked:l,value:l,onClick:function(){var e=(new Date).toLocaleDateString(),t=(new Date).toLocaleTimeString(),a=!l,c=e+" "+t;a||(c=""),console.log("Inside onCompleteHandler"+a+r),z(_,a,c)}})}),Object(p.jsx)("div",{children:l&&Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{htmlFor:"dateCompleted",children:" Completed On :"}),Object(p.jsx)("input",{type:"text",name:"dateCompleted",id:"dateCompleted",value:m,disabled:!0})]})}),Object(p.jsx)("br",{}),Object(p.jsx)(O.a,{variant:"outline-danger",onClick:function(){Y(!0)},children:"Delete Todo"}),"\xa0 \xa0",F&&Object(p.jsx)(d.a,{href:"/todoList/".concat(_),children:"View full todo"}),Object(p.jsx)("br",{})]}),(v||w)&&Object(p.jsx)(h.a.Text,{style:{color:"red"},children:E})]})}),Object(p.jsx)(x.a,{show:V,onHide:W,children:Object(p.jsxs)(h.a,{onSubmit:function(e){e.preventDefault(),Q(_),W()},children:[Object(p.jsx)(x.a.Header,{closeButton:!0,children:Object(p.jsx)(x.a.Title,{children:"Login"})}),Object(p.jsx)(x.a.Body,{children:Object(p.jsx)(h.a.Label,{htmlFor:"delete-user",children:"Are you sure you want to delete?"})}),Object(p.jsxs)(x.a.Footer,{children:[Object(p.jsx)(O.a,{variant:"secondary",onClick:W,children:"Cancel"}),Object(p.jsx)(O.a,{variant:"primary",type:"submit",children:"Yes"})]})]})})]})}function f(e){var t=e.id,r=Object(a.useContext)(j).state,c=Object(u.b)((function(){return{url:"/todoList/"+t,method:"get",headers:{Authorization:"".concat(r.user.access_token)}}})),s=Object(o.a)(c,2),n=s[0],i=s[1];return Object(a.useEffect)(i,[t]),Object(p.jsxs)("div",{children:[n&&n.data?Object(p.jsx)(m,Object(l.a)({},n.data)):"Loading...",Object(p.jsx)("hr",{}),Object(p.jsx)("div",{children:Object(p.jsx)(d.a,{href:"/",children:"Go back"})})]})}function g(e){var t=e.todoList;return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:Object(p.jsx)("u",{children:"Todo List"})}),Object(p.jsxs)("ul",{children:[t&&e.todoList.todoList.map((function(e,t){return Object(p.jsx)("ol",{children:Object(p.jsx)(m,Object(l.a)(Object(l.a)({title:e.title,author:e.author,authorId:e.authorId,description:e.description,dateCreated:e.dateCreated,id:e._id,dateCompleted:e.dateCompleted},e),{},{short:!0}))},"Todo"+t)})),t&&0===t.length&&"User does not have any task"]})]})}function v(e){var t=e.id,r=e.username,c=e.short,s=Object(a.useContext)(j),n=(s.dispatch,s.state,e);return Object(p.jsx)("div",{children:Object(p.jsxs)(b.a,{style:{backgroundColor:"#D6EAF8"},children:[c&&Object(p.jsxs)(b.a.Body,{children:[Object(p.jsxs)(b.a.Header,{as:"h5",style:{backgroundColor:"#85C1E9"},children:[" ",Object(p.jsx)(d.a,{href:"/users/".concat(t),children:r})]}),Object(p.jsx)(b.a.Title,{dark:!0}),Object(p.jsx)(b.a.Subtitle,{children:Object(p.jsx)("div",{children:"User Id: ".concat(t)})}),"\xa0 \xa0",c&&Object(p.jsx)(d.a,{href:"/users/".concat(t),children:"View User Profile"}),Object(p.jsx)("br",{})]}),Object(p.jsx)(b.a.Body,{children:!c&&Object(p.jsx)(g,{todoList:n})})]})})}function C(e){Object(a.useContext)(j).state;var t=e.userList.data.userList;return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:Object(p.jsx)("u",{children:"User List"})}),Object(p.jsx)("ul",{children:t.map((function(e,t){return Object(p.jsx)("ol",{children:Object(p.jsx)(v,{id:e._id,username:e.username,short:!0})},+t)}))})]})}var L=r(71),y=r(35),w=r(72);function k(){var e=Object(a.useContext)(j),t=e.state,r=e.dispatch,c=Object(u.b)((function(){return{url:"/todoList",method:"get",headers:{Authorization:"".concat(t.user.access_token)}}})),s=Object(o.a)(c,2),n=s[0],i=s[1];Object(a.useEffect)((function(){i()}),[t.user.access_token]),Object(a.useEffect)((function(){n&&n.data&&!1===n.isLoading&&r({type:"FETCH_TODOS",todoList:n.data.todoList})}),[n]);var d=n.isLoading;return Object(p.jsxs)(p.Fragment,{children:[d&&"Todo's loading...",Object(p.jsx)(g,{todoList:n.data})]})}var S=r(10);function T(e){var t,r,c=e.show,s=e.handleClose,n=e.setShowLogin,i=Object(a.useState)(""),d=Object(o.a)(i,2),l=d[0],b=d[1],m=Object(a.useState)(""),f=Object(o.a)(m,2),g=f[0],v=f[1],C=Object(a.useState)(!1),L=Object(o.a)(C,2),y=L[0],w=L[1];var k=Object(a.useContext)(j).dispatch,T=Object(u.b)((function(e,t){return{url:"auth/login",method:"post",data:{username:e,password:t}}})),E=Object(o.a)(T,2),D=E[0],_=E[1];return Object(a.useEffect)((function(){D&&!1===D.isLoading&&(D.data||D.error)&&(D.error?(D.error.data.error,w(!0),n(!0),alert("failed")):(w(!1),console.log(D.data),k({type:"LOGIN",username:l,access_token:D.data.access_token})))}),[D]),Object(p.jsx)(x.a,{show:c,onHide:s,children:Object(p.jsxs)(h.a,{onSubmit:function(e){e.preventDefault(),_(l,g)},children:[Object(p.jsx)(x.a.Header,{closeButton:!0,children:Object(p.jsx)(x.a.Title,{children:"Login"})}),Object(p.jsxs)(x.a.Body,{children:[Object(p.jsx)(h.a.Label,{htmlFor:"login-username",children:"Username:"}),Object(p.jsx)(h.a.Control,(t={type:"text",value:l,onChange:function(e){b(e.target.value)},name:"login-username",id:"login-username"},Object(S.a)(t,"value",l),Object(S.a)(t,"required",!0),t)),Object(p.jsx)(h.a.Label,{htmlFor:"login-password",children:"Password:"}),Object(p.jsx)(h.a.Control,(r={type:"password",value:g,onChange:function(e){v(e.target.value)},name:"login-password",id:"login-password"},Object(S.a)(r,"value",g),Object(S.a)(r,"required",!0),r)),y&&Object(p.jsx)(h.a.Text,{style:{color:"red"},children:D.error&&D.error.data.error})]}),Object(p.jsxs)(x.a.Footer,{children:[Object(p.jsx)(O.a,{variant:"secondary",onClick:s,children:"Cancel"}),Object(p.jsx)(O.a,{variant:"primary",disabled:0===l.length,type:"submit",children:"Login"})]})]})})}function E(){var e=Object(a.useContext)(j),t=e.dispatch,r=e.state.user;return Object(p.jsxs)("form",{style:{backgroundColor:"#85C1E9"},onSubmit:function(e){e.preventDefault(),t({type:"LOGOUT"})},children:["Logged in as: ",Object(p.jsx)("b",{children:r.username}),"\xa0",Object(p.jsx)("input",{type:"submit",value:"Logout"})]})}function D(e){var t=e.show,r=e.handleClose,c=e.setShowRegister,s=Object(a.useState)(""),n=Object(o.a)(s,2),i=n[0],d=n[1],l=Object(a.useState)(""),b=Object(o.a)(l,2),m=b[0],f=b[1],g=Object(a.useState)(!1),v=Object(o.a)(g,2),C=v[0],L=v[1],y=Object(a.useContext)(j),w=(y.state,y.dispatch);var k=Object(a.useState)(""),S=Object(o.a)(k,2),T=S[0],E=S[1],D=Object(u.b)((function(e){var t=e.userName,r=e.password;return{url:"auth/register",method:"post",data:{username:t,password:r,passwordConfirmation:r}}})),_=Object(o.a)(D,2),F=_[0],I=_[1];return Object(a.useEffect)((function(){F&&F.data&&w({type:"REGISTER",username:F.data.username,access_token:F.data.access_token})}),[F]),Object(a.useEffect)((function(){F&&!1===F.isLoading&&(F.data||F.error)&&(F.error?(console.log(F),L(!0),c(!0),"E11000"===F.error.data.error.substr(0,6)?E("This username is already registered with us, try registering with other username"):E("Registration failed, please try again later.")):(console.log(F),L(!1),c(!1),E("Registration successful. You may now login.")))}),[F]),Object(p.jsx)(x.a,{show:t,onHide:r,children:Object(p.jsxs)(h.a,{onSubmit:function(e){e.preventDefault(),I({userName:i,password:m}),r()},children:[Object(p.jsx)(x.a.Header,{closeButton:!0,children:Object(p.jsx)(x.a.Title,{children:"Register"})}),Object(p.jsxs)(x.a.Body,{children:[Object(p.jsx)(h.a.Label,{htmlFor:"register-username",children:"Username:"}),Object(p.jsx)(h.a.Control,{type:"text",onChange:function(e){d(e.target.value)},name:"register-username",id:"register-username",required:!0}),Object(p.jsx)(h.a.Label,{htmlFor:"register-password",children:"Password:"}),Object(p.jsx)(h.a.Control,{type:"password",name:"register-password",id:"register-password",onChange:function(e){f(e.target.value)},required:!0}),Object(p.jsx)(h.a.Label,{htmlFor:"register-password-repeat",children:"Repeat password:"}),Object(p.jsx)(h.a.Control,{type:"password",name:"register-password-repeat",id:"register-password-repeat",required:!0,onChange:function(e){m!==e.target.value?e.target.setCustomValidity("Password and Confirm Password must be same"):e.target.setCustomValidity("")}}),C&&Object(p.jsx)(h.a.Text,{style:{color:"red"},children:T})]}),Object(p.jsxs)(x.a.Footer,{children:[Object(p.jsx)(O.a,{variant:"secondary",onClick:r,children:"Cancel"}),Object(p.jsx)(O.a,{variant:"primary",type:"submit",disabled:0===i.length||0===m.length,children:"Register"})]})]})})}r(67);function _(){Object(d.d)();var e=Object(a.useContext)(j).state.user,t=Object(a.useState)(!1),r=Object(o.a)(t,2),c=r[0],s=r[1],n=Object(a.useState)(!1),i=Object(o.a)(n,2),l=i[0],u=i[1];return e.username?Object(p.jsxs)(L.a,{children:[Object(p.jsx)(E,{}),Object(p.jsx)("hr",{}),e.username&&Object(p.jsx)(d.a,{href:"/todoList/create",children:"Create New Post"}),"\xa0\xa0",e.username&&Object(p.jsx)(d.a,{href:"/users",children:"List All Users"}),Object(p.jsx)("hr",{}),Object(p.jsx)(k,{})]}):Object(p.jsx)(L.a,{style:{marginLeft:"11px"},children:Object(p.jsx)(y.a,{className:"text-center",style:{paddingTop:"10px",paddingBottom:"2px"},children:Object(p.jsxs)(b.a,{style:{width:"60%",height:"97%"},children:[Object(p.jsxs)(b.a.Header,{style:{marginTop:"20px"},children:[" ",Object(p.jsx)("h5",{children:Object(p.jsx)("b",{children:Object(p.jsx)("i",{children:"Your Daily Planner"})})}),Object(p.jsx)(w.a,{style:{width:"55%",height:"55%"},src:"/Logo.png"})]}),Object(p.jsxs)(b.a.Body,{children:[Object(p.jsx)(b.a.Title,{children:" Already Have an Account?"}),!e.username&&Object(p.jsxs)("div",{className:"justify-content-end",children:[Object(p.jsx)(O.a,{variant:"link",onClick:function(e){return s(!0)},children:"Login"}),Object(p.jsx)(T,{show:c,handleClose:function(){return s(!1)},setShowLogin:s})]})]}),Object(p.jsxs)(b.a.Footer,{className:"text-muted",children:["Sign Up For New User",Object(p.jsx)("br",{}),Object(p.jsx)(O.a,{variant:"link",onClick:function(e){return u(!0)},children:"Register"}),Object(p.jsx)(D,{show:l,handleClose:function(){return u(!1)},setShowRegister:u})]})]})})})}function F(){var e=Object(a.useContext)(j).dispatch,t=Object(u.b)((function(){return{url:"/users",method:"get"}})),r=Object(o.a)(t,2),c=r[0],s=r[1];Object(a.useEffect)(s,[]),Object(a.useEffect)((function(){c&&c.data&&!1===c.isLoading&&e({type:"FETCH_USERS",userList:c.data})}),[c]);var n=c.isLoading;return Object(p.jsxs)(p.Fragment,{children:[n&&"User's loading...",!n&&c.data&&Object(p.jsx)(C,{userList:c}),Object(p.jsx)(d.a,{href:"/",children:"Go back"})]})}function I(e){var t=e.id,r=Object(u.b)((function(){return{url:"/users/"+t,method:"get"}})),c=Object(o.a)(r,2),s=c[0],n=c[1];return Object(a.useEffect)(n,[t]),Object(p.jsxs)("div",{children:[s&&s.data?Object(p.jsx)(v,Object(l.a)({},s.data)):"Loading...",Object(p.jsx)("hr",{}),Object(p.jsx)("div",{children:Object(p.jsx)(d.a,{href:"/",children:"Go back"})})]})}var U=r(24);function R(e,t){return{userList:function(e,t){return"FETCH_USERS"===t.type?(console.log(t.userList),t.userList):e}(e.userList,t),user:function(e,t){switch(t.type){case"LOGIN":case"REGISTER":return{username:t.username,access_token:t.access_token};case"LOGOUT":return{username:void 0,access_token:void 0};default:return e}}(e.user,t),todoList:function(e,t){switch(t.type){case"CREATE_TODO":return[{id:t.id,title:t.title,author:t.author,authorId:t.authorId,description:t.description,dateCreated:t.dateCreated,completed:t.completed,dateCompleted:t.dateCompleted}].concat(Object(U.a)(e));case"TOGGLE_TODO":return e.map((function(e){e.id===t.id&&(e.completed=t.completed,e.dateCompleted=t.dateCompleted)})),e;case"DELETE_TODO":return e.filter((function(e){return e.id!==t.id}));case"FETCH_TODOS":return console.log("Inside fetch  todo"),t.todoList;default:return e}}(e.todoList,t)}}function A(){var e=Object(d.d)(),t=Object(a.useContext)(j),r=t.dispatch,c=t.state,s=c.user,n=Object(a.useState)(!1),i=Object(o.a)(n,2),b=i[0],O=i[1],x=Object(a.useState)(""),m=Object(o.a)(x,2),f=m[0],g=m[1],v=Object(a.useState)({title:"",author:s.username,description:"",dateCreated:(new Date).toLocaleDateString(),completed:!1,dateCompleted:""}),C=Object(o.a)(v,2),L=C[0],y=C[1],w=Object(u.b)((function(e){var t=e.createTodoObject;return{url:"/todoList",method:"post",headers:{Authorization:"".concat(c.user.access_token)},data:{title:t.title,author:t.author,authorId:t.authorId,description:t.description,dateCreated:t.dateCreated,completed:t.completed,dateCompleted:t.dateCompleted}}})),k=Object(o.a)(w,2),S=k[0],T=k[1];return Object(a.useEffect)((function(){S&&!1===S.isLoading&&(S.data||S.error)&&(S.error?(O(!0),401===S.error.code&&g("Unauthorized to create the particular todo")):(r({type:"CREATE_TODO",id:S.data.id,title:S.data.title,author:S.data.author,authorId:S.data.authorId,description:S.data.description,dateCreated:S.data.dateCreated,completed:S.data.completed,dateCompleted:S.data.dateCompleted}),e.navigate("/todoList/".concat(S.data.id))))}),[S]),Object(p.jsx)("div",{style:{alignItems:"center"},children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),T({createTodoObject:L}),y({title:"",author:s.username,description:"",dateCreated:(new Date).toLocaleDateString(),completed:!1,dateCompleted:""})},children:[Object(p.jsx)("div",{children:Object(p.jsx)("h2",{children:Object(p.jsx)("u",{children:"Create Todo Task"})})}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{htmlFor:"title",children:Object(p.jsx)("b",{children:" Title: \xa0 \xa0 \xa0 \xa0 \xa0"})}),Object(p.jsx)("input",{type:"text",name:"title",id:"title",onChange:function(e){y(Object(l.a)(Object(l.a)({},L),{},{title:e.target.value}))},value:L.title,required:!0})]}),Object(p.jsx)("br",{}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{htmlFor:"description",children:Object(p.jsx)("b",{children:"Description: "})}),Object(p.jsx)("textarea",{name:"description",id:"description",onChange:function(e){y(Object(l.a)(Object(l.a)({},L),{},{description:e.target.value}))},value:L.description})]}),Object(p.jsx)("br",{}),Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"submit",value:"Create"}),Object(p.jsx)("br",{}),b&&Object(p.jsx)(h.a.Text,{style:{color:"red"},children:f})]}),Object(p.jsx)("br",{}),Object(p.jsx)(d.a,{href:"/",children:"Go back"})]})})}function H(e){var t=e.title,r=e.message;return Object(p.jsxs)(L.a,{style:{padding:"50px",backgroundColor:"#85C1E9"},children:[Object(p.jsx)("hr",{}),Object(p.jsxs)(b.a,{children:[Object(p.jsx)(b.a.Header,{style:{backgroundColor:"#1E90FF"},children:Object(p.jsx)("h5",{children:"Status"})}),Object(p.jsxs)(b.a.Body,{style:{backgroundColor:"#D6EAF8"},children:[Object(p.jsx)("p",{children:t.toUpperCase()+" "+r}),Object(p.jsx)("hr",{}),Object(p.jsx)(d.a,{href:"/",children:"Go back"})]})]}),Object(p.jsx)("hr",{})]})}var G=function(){var e=Object(a.useReducer)(R,{user:{},todoList:[],userList:[]}),t=Object(o.a)(e,2),r=t[0],c=t[1],s=Object(i.f)({"/":Object(i.g)({view:Object(p.jsx)(_,{})}),"/users":Object(i.g)({view:Object(p.jsx)(F,{})}),"/todoList/create":Object(i.g)({view:Object(p.jsx)(A,{})}),"/todoList/:id":Object(i.g)((function(e){return{view:Object(p.jsx)(f,{id:e.params.id})}})),"/success/:title/:message":Object(i.g)((function(e){return{view:Object(p.jsx)(H,{title:e.params.title,message:e.params.message})}})),"/users/:id":Object(i.g)((function(e){return{view:Object(p.jsx)(I,{id:e.params.id})}}))});return Object(p.jsx)("div",{children:Object(p.jsx)(j.Provider,{value:{state:r,dispatch:c},children:Object(p.jsx)(d.b,{routes:s,children:Object(p.jsx)(d.c,{})})})})},B=r(18),N=r.n(B).a.create({baseURL:"/"});n.a.render(Object(p.jsxs)(u.a,{value:N,children:[Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(G,{})}),","]}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.6056525e.chunk.js.map