(this.webpackJsonptodoapp=this.webpackJsonptodoapp||[]).push([[0],{66:function(e,t,r){},67:function(e,t,r){"use strict";r.r(t);var a=r(1),c=r.n(a),s=r(15),n=r.n(s),i=r(5),o=r(9),d=r(7),j=c.a.createContext({state:{},dispatch:function(){}}),l=r(2),u=r(8),b=r(74),O=r(75),h=r(73),x=r(72),p=r(0);function m(e){var t=Object(d.d)(),r=e.title,c=e.author,s=e.authorId,n=e.description,o=e.dateCreated,l="true"==e.completed,m=e.dateCompleted,f=Object(a.useState)(!1),g=Object(i.a)(f,2),C=g[0],v=g[1],y=Object(a.useState)(!1),L=Object(i.a)(y,2),w=L[0],k=L[1],S=Object(a.useState)(""),E=Object(i.a)(S,2),T=E[0],D=E[1],F=e._id,_=e.short,I=Object(a.useContext)(j),U=I.state,A=I.dispatch,R=U.user,G=n;_&&n.length>30&&(G=n.substring(0,30)+"...");var H=Object(u.b)((function(e,t,r){return{url:"/todoList/"+e,method:"patch",headers:{Authorization:"".concat(U.user.access_token)},data:{completed:t,dateCompleted:r}}})),B=Object(i.a)(H,2),N=B[0],z=B[1],P=Object(a.useState)(!1),q=Object(i.a)(P,2),V=q[0],Y=q[1];Object(a.useEffect)((function(){if(N&&!1===N.isLoading&&(N.data||N.error))if(N.error)v(!0),401===N.error.code&&D("Unauthorized to toggle the particular todo");else if(A({type:"TOGGLE_TODO",id:F,dateCompleted:N.data.dateCompleted,completed:N.data.completed}),l){t.navigate("/success/"+r+"/task updated to incomplete status./")}else{t.navigate("/success/"+r+"/task completed suceessfully./")}}),[N]);var J=Object(u.b)((function(e){return{url:"/todoList/"+e,method:"delete",headers:{Authorization:"".concat(U.user.access_token)}}})),M=Object(i.a)(J,2),K=M[0],Q=M[1];function W(){Y(!1)}return Object(a.useEffect)((function(){if(K&&!1===K.isLoading&&(K.data||K.error))if(K.error)k(!0),401===K.error.code&&D("Unauthorized to delete the particular todo");else{A({type:"DELETE_TODO",id:F});t.navigate("/success/"+r+"/task deleted sucesssfully./")}}),[K]),Object(p.jsxs)("div",{children:[Object(p.jsx)(b.a,{style:{backgroundColor:"#D6EAF8"},children:Object(p.jsxs)(b.a.Body,{children:[Object(p.jsxs)(b.a.Header,{as:"h5",style:{backgroundColor:"#85C1E9"},children:[" ",Object(p.jsx)(d.a,{href:"/todoList/".concat(F),children:r})]}),Object(p.jsx)(b.a.Title,{dark:!0}),Object(p.jsx)(b.a.Subtitle,{children:Object(p.jsx)("div",{children:"Author: ".concat(c)})}),Object(p.jsx)(b.a.Subtitle,{children:Object(p.jsx)("div",{children:"Author-Id: ".concat(s)})}),Object(p.jsx)(b.a.Subtitle,{children:Object(p.jsx)("div",{children:"Date Created: ".concat(o)})}),Object(p.jsx)(b.a.Subtitle,{children:Object(p.jsx)("div",{children:"Description: ".concat(G)})}),Object(p.jsxs)(b.a.Subtitle,{children:["Status: ",l?"Completed":"InComplete"]}),R.username==c&&Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:Object(p.jsx)(h.a.Check,{type:"checkbox",label:"Task Completed",id:"completed",name:"completed",defaultChecked:l,value:l,onClick:function(){var e=(new Date).toLocaleDateString(),t=(new Date).toLocaleTimeString(),r=!l,a=e+" "+t;r||(a=""),z(F,r,a)}})}),Object(p.jsx)("div",{children:l&&Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{htmlFor:"dateCompleted",children:" Completed On :"}),Object(p.jsx)("input",{type:"text",name:"dateCompleted",id:"dateCompleted",value:m,disabled:!0})]})}),Object(p.jsx)("br",{}),Object(p.jsx)(O.a,{variant:"outline-danger",onClick:function(){Y(!0)},children:"Delete Todo"}),"\xa0 \xa0",_&&Object(p.jsx)(d.a,{href:"/todoList/".concat(F),children:"View full todo"}),Object(p.jsx)("br",{})]}),(C||w)&&Object(p.jsx)(h.a.Text,{style:{color:"red"},children:T})]})}),Object(p.jsx)(x.a,{show:V,onHide:W,children:Object(p.jsxs)(h.a,{onSubmit:function(e){e.preventDefault(),Q(F),W()},children:[Object(p.jsx)(x.a.Header,{closeButton:!0,children:Object(p.jsx)(x.a.Title,{children:"Login"})}),Object(p.jsx)(x.a.Body,{children:Object(p.jsx)(h.a.Label,{htmlFor:"delete-user",children:"Are you sure you want to delete?"})}),Object(p.jsxs)(x.a.Footer,{children:[Object(p.jsx)(O.a,{variant:"secondary",onClick:W,children:"Cancel"}),Object(p.jsx)(O.a,{variant:"primary",type:"submit",children:"Yes"})]})]})})]})}function f(e){var t=e.id,r=Object(a.useContext)(j).state,c=Object(u.b)((function(){return{url:"/todoList/"+t,method:"get",headers:{Authorization:"".concat(r.user.access_token)}}})),s=Object(i.a)(c,2),n=s[0],o=s[1];return Object(a.useEffect)(o,[t]),Object(p.jsxs)("div",{children:[n&&n.data?Object(p.jsx)(m,Object(l.a)({},n.data)):"Loading...",Object(p.jsx)("hr",{}),Object(p.jsx)("div",{children:Object(p.jsx)(d.a,{href:"/",children:"Go back"})})]})}function g(e){var t=e.todoList;return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:Object(p.jsx)("u",{children:"Todo List"})}),Object(p.jsxs)("ul",{children:[Object(p.jsx)("br",{}),t&&e.todoList.todoList.map((function(e,t){return Object(p.jsx)("ol",{children:Object(p.jsx)(m,Object(l.a)(Object(l.a)({title:e.title,author:e.author,authorId:e.authorId,description:e.description,dateCreated:e.dateCreated,id:e._id,dateCompleted:e.dateCompleted},e),{},{short:!0}))},"Todo"+t)})),t&&0===t.todoList.length&&Object(p.jsx)(b.a,{children:Object(p.jsx)(b.a.Body,{style:{backgroundColor:"#1E90FF"},children:"User does not have any task"})})]})]})}function C(e){var t=e.id,r=e.username,c=e.short,s=Object(a.useContext)(j),n=(s.dispatch,s.state,e);return Object(p.jsx)("div",{children:Object(p.jsxs)(b.a,{style:{backgroundColor:"#D6EAF8"},children:[c&&Object(p.jsxs)(b.a.Body,{children:[Object(p.jsxs)(b.a.Header,{as:"h5",style:{backgroundColor:"#85C1E9"},children:[" ",Object(p.jsx)(d.a,{href:"/users/".concat(t),children:r})]}),Object(p.jsx)(b.a.Title,{dark:!0}),Object(p.jsx)(b.a.Subtitle,{children:Object(p.jsx)("div",{children:"User Id: ".concat(t)})}),"\xa0 \xa0",c&&Object(p.jsx)(d.a,{href:"/users/".concat(t),children:"View User Profile"}),Object(p.jsx)("br",{})]}),Object(p.jsx)(b.a.Body,{children:!c&&Object(p.jsx)(g,{todoList:n})})]})})}function v(e){Object(a.useContext)(j).state;var t=e.userList.data.userList;return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:Object(p.jsx)("u",{children:"User List"})}),Object(p.jsx)("ul",{children:t.map((function(e,t){return Object(p.jsx)("ol",{children:Object(p.jsx)(C,{id:e._id,username:e.username,short:!0})},+t)}))})]})}var y=r(70),L=r(71);function w(){var e=Object(a.useContext)(j),t=e.state,r=e.dispatch,c=Object(u.b)((function(){return{url:"/todoList",method:"get",headers:{Authorization:"".concat(t.user.access_token)}}})),s=Object(i.a)(c,2),n=s[0],o=s[1];Object(a.useEffect)((function(){o()}),[t.user.access_token]),Object(a.useEffect)((function(){n&&n.data&&!1===n.isLoading&&r({type:"FETCH_TODOS",todoList:n.data.todoList})}),[n]);var d=n.isLoading;return Object(p.jsxs)(p.Fragment,{children:[d&&"Todo's loading...",Object(p.jsx)(g,{todoList:n.data})]})}var k=r(10);function S(e){var t,r,c=e.show,s=e.handleClose,n=e.setShowLogin,o=Object(a.useState)(""),d=Object(i.a)(o,2),l=d[0],b=d[1],m=Object(a.useState)(""),f=Object(i.a)(m,2),g=f[0],C=f[1],v=Object(a.useState)(!1),y=Object(i.a)(v,2),L=y[0],w=y[1];var S=Object(a.useContext)(j).dispatch,E=Object(u.b)((function(e,t){return{url:"auth/login",method:"post",data:{username:e,password:t}}})),T=Object(i.a)(E,2),D=T[0],F=T[1];return Object(a.useEffect)((function(){D&&!1===D.isLoading&&(D.data||D.error)&&(D.error?(D.error.data.error,w(!0),n(!0)):(w(!1),S({type:"LOGIN",username:l,access_token:D.data.access_token})))}),[D]),Object(p.jsx)(x.a,{show:c,onHide:s,children:Object(p.jsxs)(h.a,{onSubmit:function(e){e.preventDefault(),F(l,g)},children:[Object(p.jsx)(x.a.Header,{closeButton:!0,children:Object(p.jsx)(x.a.Title,{children:"Login"})}),Object(p.jsxs)(x.a.Body,{children:[Object(p.jsx)(h.a.Label,{htmlFor:"login-username",children:"Username:"}),Object(p.jsx)(h.a.Control,(t={type:"text",value:l,onChange:function(e){b(e.target.value)},name:"login-username",id:"login-username"},Object(k.a)(t,"value",l),Object(k.a)(t,"required",!0),t)),Object(p.jsx)(h.a.Label,{htmlFor:"login-password",children:"Password:"}),Object(p.jsx)(h.a.Control,(r={type:"password",value:g,onChange:function(e){C(e.target.value)},name:"login-password",id:"login-password"},Object(k.a)(r,"value",g),Object(k.a)(r,"required",!0),r)),L&&Object(p.jsx)(h.a.Text,{style:{color:"red"},children:D.error&&D.error.data.error})]}),Object(p.jsxs)(x.a.Footer,{children:[Object(p.jsx)(O.a,{variant:"secondary",onClick:s,children:"Cancel"}),Object(p.jsx)(O.a,{variant:"primary",disabled:0===l.length,type:"submit",children:"Login"})]})]})})}function E(){var e=Object(a.useContext)(j),t=e.dispatch,r=e.state.user;return Object(p.jsxs)("form",{style:{backgroundColor:"#85C1E9"},onSubmit:function(e){e.preventDefault(),t({type:"LOGOUT"})},children:["Logged in as: ",Object(p.jsx)("b",{children:r.username}),"\xa0",Object(p.jsx)("input",{type:"submit",value:"Logout"})]})}function T(e){var t=e.show,r=e.handleClose,c=e.setShowRegister,s=Object(a.useState)(""),n=Object(i.a)(s,2),o=n[0],d=n[1],l=Object(a.useState)(""),b=Object(i.a)(l,2),m=b[0],f=b[1],g=Object(a.useState)(!1),C=Object(i.a)(g,2),v=C[0],y=C[1],L=Object(a.useContext)(j),w=(L.state,L.dispatch);var k=Object(a.useState)(""),S=Object(i.a)(k,2),E=S[0],T=S[1],D=Object(u.b)((function(e){var t=e.userName,r=e.password;return{url:"auth/register",method:"post",data:{username:t,password:r,passwordConfirmation:r}}})),F=Object(i.a)(D,2),_=F[0],I=F[1];return Object(a.useEffect)((function(){_&&_.data&&w({type:"REGISTER",username:_.data.username,access_token:_.data.access_token})}),[_]),Object(a.useEffect)((function(){_&&!1===_.isLoading&&(_.data||_.error)&&(_.error?(y(!0),c(!0),"E11000"===_.error.data.error.substr(0,6)?T("This username is already registered with us, try registering with other username"):T("Registration failed, please try again later.")):(y(!1),c(!1),T("Registration successful. You may now login.")))}),[_]),Object(p.jsx)(x.a,{show:t,onHide:r,children:Object(p.jsxs)(h.a,{onSubmit:function(e){e.preventDefault(),I({userName:o,password:m}),r()},children:[Object(p.jsx)(x.a.Header,{closeButton:!0,children:Object(p.jsx)(x.a.Title,{children:"Register"})}),Object(p.jsxs)(x.a.Body,{children:[Object(p.jsx)(h.a.Label,{htmlFor:"register-username",children:"Username:"}),Object(p.jsx)(h.a.Control,{type:"text",onChange:function(e){d(e.target.value)},name:"register-username",id:"register-username",required:!0}),Object(p.jsx)(h.a.Label,{htmlFor:"register-password",children:"Password:"}),Object(p.jsx)(h.a.Control,{type:"password",name:"register-password",id:"register-password",onChange:function(e){f(e.target.value)},required:!0}),Object(p.jsx)(h.a.Label,{htmlFor:"register-password-repeat",children:"Repeat password:"}),Object(p.jsx)(h.a.Control,{type:"password",name:"register-password-repeat",id:"register-password-repeat",required:!0,onChange:function(e){m!==e.target.value?e.target.setCustomValidity("Password and Confirm Password must be same"):e.target.setCustomValidity("")}}),v&&Object(p.jsx)(h.a.Text,{style:{color:"red"},children:E})]}),Object(p.jsxs)(x.a.Footer,{children:[Object(p.jsx)(O.a,{variant:"secondary",onClick:r,children:"Cancel"}),Object(p.jsx)(O.a,{variant:"primary",type:"submit",disabled:0===o.length||0===m.length,children:"Register"})]})]})})}r(66);function D(){Object(d.d)();var e=Object(a.useContext)(j).state.user,t=Object(a.useState)(!1),r=Object(i.a)(t,2),c=r[0],s=r[1],n=Object(a.useState)(!1),o=Object(i.a)(n,2),l=o[0],u=o[1];return e.username?Object(p.jsxs)(y.a,{children:[Object(p.jsx)(E,{}),Object(p.jsx)("hr",{}),e.username&&Object(p.jsx)(d.a,{href:"/todoList/create",children:"Create New Todo"}),"\xa0\xa0",e.username&&Object(p.jsx)(d.a,{href:"/users",children:"List All Users"}),Object(p.jsx)("hr",{}),Object(p.jsx)(w,{})]}):Object(p.jsx)(y.a,{children:Object(p.jsxs)(L.a,{children:[Object(p.jsx)(b.a,{style:{backgroundColor:"#85C1E9",border:"none"},children:Object(p.jsx)(b.a.Img,{className:"card-width",src:"/MyTodoLogo.jpg",alt:"Card image",style:{width:"73%",alignSelf:"center"}})}),Object(p.jsxs)(b.a,{className:"text-center",style:{marginLeft:"10px",marginTop:"30px",alignSelf:"center"},children:[Object(p.jsxs)(b.a.Header,{style:{backgroundColor:"#D6EAF8"},children:[" ",Object(p.jsx)("h5",{children:Object(p.jsx)("b",{children:Object(p.jsx)("i",{children:"Your Daily Planner"})})})]}),Object(p.jsx)(b.a.Img,{variant:"top",src:"/Logo.png",style:{width:"45%",height:"55%",alignSelf:"center"}}),Object(p.jsxs)(b.a.Body,{children:[Object(p.jsx)(b.a.Title,{children:Object(p.jsx)("h5",{children:" Already Have an Account?"})}),!e.username&&Object(p.jsxs)("div",{className:"justify-content-end",children:[Object(p.jsx)(O.a,{variant:"link",onClick:function(e){return s(!0)},children:Object(p.jsx)("h5",{children:" Login "})}),Object(p.jsx)(S,{show:c,handleClose:function(){return s(!1)},setShowLogin:s})]})]}),Object(p.jsxs)(b.a.Footer,{className:"text-muted",style:{backgroundColor:"#D6EAF8"},children:["Sign Up For New User",Object(p.jsx)("br",{}),Object(p.jsx)(O.a,{variant:"link",onClick:function(e){return u(!0)},children:Object(p.jsx)("h5",{children:" Register "})}),Object(p.jsx)(T,{show:l,handleClose:function(){return u(!1)},setShowRegister:u})]})]})]})})}function F(){var e=Object(a.useContext)(j).dispatch,t=Object(u.b)((function(){return{url:"/users",method:"get"}})),r=Object(i.a)(t,2),c=r[0],s=r[1];Object(a.useEffect)(s,[]),Object(a.useEffect)((function(){c&&c.data&&!1===c.isLoading&&e({type:"FETCH_USERS",userList:c.data})}),[c]);var n=c.isLoading;return Object(p.jsxs)(p.Fragment,{children:[n&&"User's loading...",!n&&c.data&&Object(p.jsx)(v,{userList:c}),Object(p.jsx)(d.a,{href:"/",children:"Go back"})]})}function _(e){var t=e.id,r=Object(u.b)((function(){return{url:"/users/"+t,method:"get"}})),c=Object(i.a)(r,2),s=c[0],n=c[1];return Object(a.useEffect)(n,[t]),Object(p.jsxs)("div",{children:[s&&s.data?Object(p.jsx)(C,Object(l.a)({},s.data)):"Loading...",Object(p.jsx)("hr",{}),Object(p.jsx)("div",{children:Object(p.jsx)(d.a,{href:"/",children:"Go back"})})]})}var I=r(24);function U(e,t){return{userList:function(e,t){return"FETCH_USERS"===t.type?t.userList:e}(e.userList,t),user:function(e,t){switch(t.type){case"LOGIN":case"REGISTER":return{username:t.username,access_token:t.access_token};case"LOGOUT":return{username:void 0,access_token:void 0};default:return e}}(e.user,t),todoList:function(e,t){switch(t.type){case"CREATE_TODO":return[{id:t.id,title:t.title,author:t.author,authorId:t.authorId,description:t.description,dateCreated:t.dateCreated,completed:t.completed,dateCompleted:t.dateCompleted}].concat(Object(I.a)(e));case"TOGGLE_TODO":return e.map((function(e){e.id===t.id&&(e.completed=t.completed,e.dateCompleted=t.dateCompleted)})),e;case"DELETE_TODO":return e.filter((function(e){return e.id!==t.id}));case"FETCH_TODOS":return t.todoList;default:return e}}(e.todoList,t)}}function A(){var e=Object(d.d)(),t=Object(a.useContext)(j),r=t.dispatch,c=t.state,s=c.user,n=Object(a.useState)(!1),o=Object(i.a)(n,2),b=o[0],O=o[1],x=Object(a.useState)(""),m=Object(i.a)(x,2),f=m[0],g=m[1],C=Object(a.useState)({title:"",author:s.username,description:"",dateCreated:(new Date).toLocaleDateString(),completed:!1,dateCompleted:""}),v=Object(i.a)(C,2),y=v[0],L=v[1],w=Object(u.b)((function(e){var t=e.createTodoObject;return{url:"/todoList",method:"post",headers:{Authorization:"".concat(c.user.access_token)},data:{title:t.title,author:t.author,authorId:t.authorId,description:t.description,dateCreated:t.dateCreated,completed:t.completed,dateCompleted:t.dateCompleted}}})),k=Object(i.a)(w,2),S=k[0],E=k[1];return Object(a.useEffect)((function(){S&&!1===S.isLoading&&(S.data||S.error)&&(S.error?(O(!0),401===S.error.code&&g("Unauthorized to create the particular todo")):(r({type:"CREATE_TODO",id:S.data.id,title:S.data.title,author:S.data.author,authorId:S.data.authorId,description:S.data.description,dateCreated:S.data.dateCreated,completed:S.data.completed,dateCompleted:S.data.dateCompleted}),e.navigate("/todoList/".concat(S.data.id))))}),[S]),Object(p.jsx)("div",{style:{alignItems:"center"},children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),E({createTodoObject:y}),L({title:"",author:s.username,description:"",dateCreated:(new Date).toLocaleDateString(),completed:!1,dateCompleted:""})},children:[Object(p.jsx)("div",{children:Object(p.jsx)("h2",{children:Object(p.jsx)("u",{children:"Create Todo Task"})})}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{htmlFor:"title",children:Object(p.jsx)("b",{children:" Title: \xa0 \xa0 \xa0 \xa0 \xa0"})}),Object(p.jsx)("input",{type:"text",name:"title",id:"title",onChange:function(e){L(Object(l.a)(Object(l.a)({},y),{},{title:e.target.value}))},value:y.title,required:!0})]}),Object(p.jsx)("br",{}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{htmlFor:"description",children:Object(p.jsx)("b",{children:"Description: "})}),Object(p.jsx)("textarea",{name:"description",id:"description",onChange:function(e){L(Object(l.a)(Object(l.a)({},y),{},{description:e.target.value}))},value:y.description})]}),Object(p.jsx)("br",{}),Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"submit",value:"Create"}),Object(p.jsx)("br",{}),b&&Object(p.jsx)(h.a.Text,{style:{color:"red"},children:f})]}),Object(p.jsx)("br",{}),Object(p.jsx)(d.a,{href:"/",children:"Go back"})]})})}function R(e){var t=e.title,r=e.message;return Object(p.jsxs)(y.a,{style:{padding:"50px",backgroundColor:"#85C1E9"},children:[Object(p.jsx)("hr",{}),Object(p.jsxs)(b.a,{children:[Object(p.jsx)(b.a.Header,{style:{backgroundColor:"#1E90FF"},children:Object(p.jsx)("h5",{children:"Status"})}),Object(p.jsxs)(b.a.Body,{style:{backgroundColor:"#D6EAF8"},children:[Object(p.jsx)("p",{children:t.toUpperCase()+" "+r}),Object(p.jsx)("hr",{}),Object(p.jsx)(d.a,{href:"/",children:"Go back"})]})]}),Object(p.jsx)("hr",{})]})}var G=function(){var e=Object(a.useReducer)(U,{user:{},todoList:[],userList:[]}),t=Object(i.a)(e,2),r=t[0],c=t[1],s=Object(o.f)({"/":Object(o.g)({view:Object(p.jsx)(D,{})}),"/users":Object(o.g)({view:Object(p.jsx)(F,{})}),"/todoList/create":Object(o.g)({view:Object(p.jsx)(A,{})}),"/todoList/:id":Object(o.g)((function(e){return{view:Object(p.jsx)(f,{id:e.params.id})}})),"/success/:title/:message":Object(o.g)((function(e){return{view:Object(p.jsx)(R,{title:e.params.title,message:e.params.message})}})),"/users/:id":Object(o.g)((function(e){return{view:Object(p.jsx)(_,{id:e.params.id})}}))});return Object(p.jsx)("div",{children:Object(p.jsx)(j.Provider,{value:{state:r,dispatch:c},children:Object(p.jsx)(d.b,{routes:s,children:Object(p.jsx)(d.c,{})})})})},H=r(18),B=r.n(H).a.create({baseURL:"/api"});n.a.render(Object(p.jsxs)(u.a,{value:B,children:[Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(G,{})}),","]}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.caf1b1eb.chunk.js.map